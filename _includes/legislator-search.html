{% if include.title %}
  {% assign title = include.title %}
{% elsif include.text %}
  {% assign text = include.text %}
{% else %}
  {% assign title = 'legislator search' %}
{% endif %}


<div id="find-my-reps"></div>
<script>
  window.addEventListener("DOMContentLoaded", function() {
    var all_legs = {
    {% for leg in site.legislators %}
      {% assign district = site.data.cache.districts_by_id[leg.district].name %}
      {% if leg.ocd_id%}
      "{{leg.ocd_id}}": {
        party: "{{leg.party}}",
        first_name: "{{leg.first_name}}",
        last_name: "{{leg.last_name}}",
        href: "{{leg.id}}",
        district: "{{district}}",
        img: "{{ leg.square_picture }}",
        pledge: {{ leg.pledge }},
      },
      {% endif %}
    {% endfor %}
  };

  var data = {
    legislatorsInfo: all_legs,
    title: "{{title}}",
    text: "{{text}}",
    resultStyle: "{{include.resultStyle}}",
    theme: "{{include.theme}}",
  };

    AOM.renderFindMyReps("find-my-reps", data);
  });
</script>
